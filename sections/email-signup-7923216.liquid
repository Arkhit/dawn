{{ 'section-email-signup-7923216.css' | asset_url | stylesheet_tag }}

<div class="custom-section custom-section--email-signup" style="background-color: {{section.settings.bg_color}}">

    <div class="custom-section__bg-container"
        {% unless section.settings.bg_image == blank %}style="background-image: url('{{section.settings.bg_image | image_url}}');" {% endunless %}>
        
        <div class="{% if section.settings.page_width %}page-width{% endif %}">

            {% if section.settings.title != blank or section.settings.subtitle != blank%}
            <div class="custom-section__header center">
                {% unless section.settings.title == blank %}
                {% if section.settings.title_top_line %}<div class="custom-section__header--top-line"></div>{% endif %}
                <h2 class="custom-section__header--title">{{ section.settings.title | escape }}</h2>
                {% endunless %}
                {% unless section.settings.subtitle == blank %}
                <p class="custom-section__header--subtitle">{{ section.settings.subtitle | escape }}</p>
                {% endunless%}
            </div>
            {% endif %}

            {% liquid
                assign hover_effect = section.settings.hover_effect
                assign shadow_effect = section.settings.shadow_effect
                assign auto_width = section.settings.auto_width
            %}

            {% case hover_effect %}
                {% when "lighten" %}
                    {%- assign btn_he_class = "custom-btn-he--lighten" -%}
                {% when "color-switch" %}
                    {%- assign btn_he_class = "custom-btn-he--color-switch" -%}
                {% when "slide" %}
                    {%- assign btn_he_class = "custom-btn-he--slide" -%}
                {% when "shine" %}
                    {%- assign btn_he_class = "custom-btn-he--shine" -%}
            {% endcase %}

            <div>
                {% form 'customer', class: 'newsletter-form' %}
                <input type="hidden" name="contact[tags]" value="newsletter">
                <div class="newsletter-form__field-wrapper">
                    <div class="field">
                    <input
                        id="NewsletterForm--{{ section.id }}"
                        type="email"
                        name="contact[email]"
                        class="field__input"
                        value="{{ form.email }}"
                        aria-required="true"
                        autocorrect="off"
                        autocapitalize="off"
                        autocomplete="email"
                        {% if form.errors %}
                        autofocus
                        aria-invalid="true"
                        aria-describedby="Newsletter-error--{{ section.id }}"
                        {% elsif form.posted_successfully? %}
                        aria-describedby="Newsletter-success--{{ section.id }}"
                        {% endif %}
                        placeholder="{{ section.settings.placeholder | escape }}"
                        required
                    >
                    <label class="field__label" for="NewsletterForm--{{ section.id }}">
                        {{ section.settings.placeholder | escape }}
                    </label>
                    <button type="submit" class="newsletter-form__button field__button custom-btn custom-btn--default {{btn_he_class}} {% if shadow_effect %}custom-btn-bs{% endif %}" name="commit" id="Subscribe">
                        {% render 'icon-arrow' %}
                        Subscribe
                        {% if hover_effect == 'shine'%}
                            <span></span>
                        {% endif %}
                    </button>
                    </div>
                    {%- if form.errors -%}
                    <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">{% render 'icon-error' %}{{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}</small>
                    {%- endif -%}
                </div>
                {%- if form.posted_successfully? -%}
                    <h3 class="newsletter-form__message newsletter-form__message--success form__message" id="Newsletter-success--{{ section.id }}" tabindex="-1" autofocus>{% render 'icon-success' %}{{ 'newsletter.success' | t }}</h3>
                {%- endif -%}
                {% endform %}
            </div>

            <div class="wishlist__grid flex container" grid-wishlist>
            </div>
            
        </div>

    </div>
</div>

{% schema %}
    {
        "name": "ðŸ”° Email Signup",
        "tag": "section",
        "settings": [
            {
                "type": "text",
                "id": "title",
                "label": "Title",
                "default": "Join our VIP Club"
            },
            {
                "type": "checkbox",
                "id": "title_top_line",
                "label": "Show Top line",
                "default": true
            },
            {
                "type": "text",
                "id": "subtitle",
                "label": "Subtitle",
                "default": "Amet massa vitae tortor condimentum."
            },
            {
                "type": "color",
                "id": "bg_color",
                "label": "Background Color"
            },
            {
                "type": "image_picker",
                "id": "bg_image",
                "label": "Background Image"
            },
            {
                "type": "checkbox",
                "id": "page_width",
                "label": "Enable Max Page Width",
                "default": true
            },
            {
                "type": "header",
                "content": "Email Input Settings"
            },
            {
                "type": "text",
                "id": "placeholder",
                "label": "Placeholder",
                "default": "Email Address..."
            },
            {
                "type": "header",
                "content": "Button Settings"
            },
            {
                "type": "select",
                "id": "hover_effect",
                "label": "Hover Effect",
                "options": [
                    {
                    "value": "lighten",
                    "label": "Lighten Effect"
                    },
                    {
                    "value": "color-switch",
                    "label": "Color Switch Effect"
                    },
                    {
                    "value": "slide",
                    "label": "Slide Effect"
                    },
                    {
                    "value": "shine",
                    "label": "Shine Effect"
                    }
                ],
                "default": "shine"
            },
            {
                "type": "checkbox",
                "id": "shadow_effect",
                "label": "Enable Shadow Effect",
                "default": true
            }
        ],
        "presets":[
            {
                "name": "ðŸ”° Email Signup",
                "category": "Custom Section"
            } 
        ]
    }
{% endschema %}