{{ 'section-testimony-7923216.css' | asset_url | stylesheet_tag }}
<link rel="stylesheet" href="{{ 'component-slider.css' | asset_url }}" media="print" onload="this.media='all'">
<noscript>{{ 'component-slider.css' | asset_url | stylesheet_tag }}</noscript>

<div class="custom-section custom-section--testimony" style="background-color: {{section.settings.bg_color}}">

    <div class="custom-section__bg-container"
        {% unless section.settings.bg_image == blank %}style="background-image: url('{{section.settings.bg_image | image_url}}');" {% endunless %}>
        
        <div class="{% if section.settings.page_width %}page-width{% endif %}">

            {% if section.settings.title != blank or section.settings.subtitle != blank%}
            <div class="custom-section__header center">
                {% unless section.settings.title == blank %}
                <div class="custom-section__header--top-line"></div>
                <h2 class="custom-section__header--title">{{ section.settings.title | escape }}</h2>
                {% endunless %}
                {% unless section.settings.subtitle == blank %}
                <p class="custom-section__header--subtitle">{{ section.settings.subtitle | escape }}</p>
                {% endunless%}
            </div>
            {% endif %}

            <slider-component>

                <ul class="grid grid--1-col{% unless section.blocks.size < 2 %} grid--3-col-desktop grid--2-col-tablet{% endunless %}{% if section.settings.swipe_on_mobile and section.blocks.size > 1 %} slider slider--mobile grid--peek{% endif %}"
                    id="Slider-{{ section.id }}"
                    role="list"
                >

                    {%- for block in section.blocks -%}

                    <li class="grid__item custom-section--testimony__list"
                        id="Slide-{{ section.id }}-{{ forloop.index }}"
                    >
                        {% assign review_size = block.settings.testimony | size %}
                        <div class="custom-section--testimony__card">

                            <div class="custom-section--testimony__card--review">
                            {% comment %} Edit target size if necessary {% endcomment %}
                                {% unless review_size <= 300 %}
                                <input type="checkbox" id="readmore-toggle-{{forloop.index}}" class="readmore-toggle">
                                <label for="readmore-toggle-{{forloop.index}}" class="readmore-label"></label>
                                <p>{{ block.settings.testimony | strip_html }}<span></span></p>
                                {% else %}
                                <p>{{ block.settings.testimony | strip_html }}</p>
                                {% endunless %}
                                
                                
                            </div>

                            <div class="custom-section--testimony__card--client">
                                <div>
                                    {% unless block.settings.image == blank %}
                                    <img
                                        srcset="{%- if block.settings.image.width >= 275 -%}{{ block.settings.image | img_url: '275x' }} 275w,{%- endif -%}
                                            {%- if block.settings.image.width >= 550 -%}{{ block.settings.image | img_url: '550x' }} 550w,{%- endif -%}
                                            {%- if block.settings.image.width >= 710 -%}{{ block.settings.image | img_url: '710x' }} 710w,{%- endif -%}
                                            {%- if block.settings.image.width >= 1420 -%}{{ block.settings.image | img_url: '1420x' }} 1420w,{%- endif -%}
                                            {{ block.settings.image | img_url: 'master' }} {{ block.settings.image.width }}w"
                                        src="{{ block.settings.image | img_url: '550x' }}"
                                        sizes="(min-width: 990px) {% if section.blocks.size <= 2 %}710px{% else %}550px{% endif %},
                                            (min-width: 750px) {% if section.blocks.size == 1 %}710px{% else %}550px{% endif %},
                                            calc(100vw - 30px)"
                                        alt="{{ block.settings.image.alt }}"
                                        height="{{ block.settings.image.height }}"
                                        width="{{ block.settings.image.width }}"
                                        loading="lazy"
                                    >
                                    {% else %}
                                    <div>
                                        {% if block.settings.name != blank %}
                                            {{ block.settings.name | slice: 0 }}
                                        {% else %}
                                            G
                                        {% endif %}
                                    </div>
                                    {% endunless %}
                                </div>
                                <div>
                                    <h3>{{ block.settings.name | escape }}</h3>

                                    <div>
                                    {% for i in (1..5) %}
                                        {% render 'icon-star' %}
                                    {% endfor %}
                                    </div>
                                </div>
                            </div>

                        </div>
                    
                    </li>
                    
                    {%- endfor -%}

                </ul>

                {%- if section.settings.swipe_on_mobile and section.blocks.size > 1 -%}
                <div class="slider-buttons no-js-hidden medium-hide{% if section.blocks.size < 2 %} small-hide{% endif %}">
                    <button type="button" class="slider-button slider-button--prev" name="previous" aria-label="{{ 'general.slider.previous_slide' | t }}">{% render 'icon-caret' %}</button>
                    <div class="slider-counter caption">
                        <span class="slider-counter--current">1</span>
                        <span aria-hidden="true"> / </span>
                        <span class="visually-hidden">{{ 'general.slider.of' | t }}</span>
                        <span class="slider-counter--total">{{ section.blocks.size }}</span>
                    </div>
                    <button type="button" class="slider-button slider-button--next" name="next" aria-label="{{ 'general.slider.next_slide' | t }}">{% render 'icon-caret' %}</button>
                </div>
                {%- endif -%}

            </slider-component>

            {% if section.settings.show_btn %}
            <div class="custom-section__button center">
                {% render 'button-7923216',
                    btn_label: section.settings.btn_label,
                    btn_link: section.settings.btn_link,
                    btn_size: section.settings.btn_size,
                    hover_effect: section.settings.hover_effect,
                    shadow_effect: section.settings.shadow_effect,
                    auto_width: section.settings.auto_width
                %}
            </div>
            {% endif %}

        </div>

    </div>

</div>


{% schema %}
    {
        "name": "ðŸ”° Testimony",
        "tag": "section",
        "max_blocks": 6,
        "settings": [
            {
                "type": "text",
                "id": "title",
                "label": "Title",
                "default": "Our Happy Clients!"
            },
            {
                "type": "text",
                "id": "subtitle",
                "label": "Subtitle",
                "default": "Amet massa vitae tortor condimentum."
            },
            {
                "type": "color",
                "id": "bg_color",
                "label": "Background Color"
            },
            {
                "type": "image_picker",
                "id": "bg_image",
                "label": "Background Image"
            },
            {
                "type": "checkbox",
                "id": "page_width",
                "label": "Enable Max Page Width",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "swipe_on_mobile",
                "default": true,
                "label": "Swipe on mobile"
            },
            {
                "type": "header",
                "content": "Button Settings"
            },
            {
                "type": "checkbox",
                "id": "show_btn",
                "label": "Show Button",
                "default": true
            },
            {
                "type":"text",
                "id":"btn_label",
                "label":"Label",
                "default":"Shop Now"
            },
            {
                "type": "url",
                "id": "btn_link",
                "label": "Link"
            },
            {
                "type": "select",
                "id": "btn_size",
                "label": "Button Size",
                "options": [
                    {
                    "value": "default",
                    "label": "Default"
                    },
                    {
                    "value": "medium",
                    "label": "Medium"
                    },
                    {
                    "value": "large",
                    "label": "Large"
                    }
                ],
                "default": "default"
            },
            {
                "type": "select",
                "id": "hover_effect",
                "label": "Hover Effect",
                "options": [
                    {
                    "value": "lighten",
                    "label": "Lighten Effect"
                    },
                    {
                    "value": "color-switch",
                    "label": "Color Switch Effect"
                    },
                    {
                    "value": "slide",
                    "label": "Slide Effect"
                    },
                    {
                    "value": "shine",
                    "label": "Shine Effect"
                    }
                ],
                "default": "shine"
            },
            {
                "type": "checkbox",
                "id": "shadow_effect",
                "label": "Enable Shadow Effect",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "auto_width",
                "label": "Enable Auto Width",
                "default": false
            }
        ],
        "blocks": [
            {
                "type": "review",
                "name": "Testimony Item",
                "settings": [
                    {
                        "type": "text",
                        "id": "name",
                        "label": "Name",
                        "default": "Name N."
                    },
                    {
                        "type": "richtext",
                        "id": "testimony",
                        "label": "Testimony",
                        "default": "<p>Sagittis nisl rhoncus mattis rhoncus urna neque viverra. In iaculis nunc sed augue lacus viverra vitae congue.</p>"
                    },
                    {
                        "type": "image_picker",
                        "id": "image",
                        "label": "Image"
                    }
                ]
            }
        ],
        "presets":[
            {
                "name": "ðŸ”° Testimony",
                "category": "Custom Section",
                "blocks":[
                    {
                        "type": "review"
                    },
                    {
                        "type": "review"
                    },
                    {
                        "type": "review"
                    }
                ]
            } 
        ]
    }
{% endschema %}
