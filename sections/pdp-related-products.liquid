{% assign related_products = collections.first.products %}

<div class="ml-base mb-mega">
  <div>
    <div
      id="related-products-carousel"
      class="splide"
      aria-label="carousel with thumbnail"
    >
      <div class="relative flex justify-between mr-base items-center mb-base">
        <h1 class="text-t-md">Related products</h1>

        <div class="splide__arrows flex gap-base">
          {% render 'prev', class: 'splide__arrow splide__arrow--prev' %}
          {% render 'next', class: 'splide__arrow splide__arrow--next' %}
        </div>
      </div>

      <div class="relative">
        <div class="splide__track">
          <ul class="splide__list">
            {% for product in related_products %}
              {% if forloop.index != related_products.size %}
                {% assign class = '!border-0' %}
              {% endif %}

              <li class="splide__slide">
                {% render 'product-card', product: product, class: class %}
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
