{{ 'custom.css' | asset_url | stylesheet_tag }}
{%- if section.settings.hidden != true -%}
    <div class="color-{{ section.settings.color_scheme }}" role="region" aria-label="{{ 'sections.header.announcement' | t }}" {{ section.shopify_attributes }}>
      <div class="SectionGrid">
        <div class="WideGrid">
        <div class="pre-header">
            {%- for block in section.blocks -%}
                <a class="pre-head-wrapper pre-header__link link link--text focus-inset animate-arrow" href="{{ block.settings.link }}">
                    {%- case block.type -%}
                    {%- when 'pre-header' -%}    
                        <div class="pre-head-combo">
                            <div class="pre-head-img">
                                <img
                                src="{{ block.settings.image | img_url: '44x' }}"
                                alt="{{ block.settings.title }}"
                                width="22"
                                height="22"
                                loading="lazy"
                                >
                            </div>  
                            <div class="pre-head-txt">
                                {%- if block.settings.text != blank -%}
                                    <p class="pre-header__message h5">
                                        {{ block.settings.text | escape }}
                                    </p>
                                {%- endif -%}   
                            </div>       
                        </div>
                    {%- endcase -%}
                </a>
            {%- endfor -%}
        </div>
      </div>
      </div>
    </div> 
{%- endif -%}


{% schema %}
{
  "name": "Pre-Header",
  "max_blocks": 3,
  "tag": "section",
  "settings": [
    {
        "type": "select",
        "id": "color_scheme",
        "options": [
        {
            "value": "background-1",
            "label": "t:sections.announcement-bar.blocks.announcement.settings.color_scheme.options__1.label"
        },
        {
            "value": "background-2",
            "label": "t:sections.announcement-bar.blocks.announcement.settings.color_scheme.options__2.label"
        },
        {
            "value": "inverse",
            "label": "t:sections.announcement-bar.blocks.announcement.settings.color_scheme.options__3.label"
        },
        {
            "value": "accent-1",
            "label": "t:sections.announcement-bar.blocks.announcement.settings.color_scheme.options__4.label"
        },
        {
            "value": "accent-2",
            "label": "t:sections.announcement-bar.blocks.announcement.settings.color_scheme.options__5.label"
        }
        ],
        "default": "accent-1",
        "label": "t:sections.announcement-bar.blocks.announcement.settings.color_scheme.label"
    },
    {
        "type": "checkbox",
        "id": "hidden",
        "label": "Pre-Header ausblenden", 
        "default": false
    }
  ],
  "blocks": [
    {
      "type": "pre-header",
      "name": "Pre-Header",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "default": "This is custom shit",
          "label": "Text"
        },
        {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    }
  ],
  "presets": [{
    "name": "PreHeader",
    "blocks": [
      {
        "type": "pre-header"
      }, 
      {
        "type": "pre-header"
      },
      {
        "type": "pre-header"
      }
    ]
    }]
}
{% endschema %}