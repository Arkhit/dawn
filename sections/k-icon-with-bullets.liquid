{% assign background_color = "bg-" | append: section.settings.background_color %}
{% assign img_placement = section.settings.icon_placement %}

<div class="icon-w-bul {{background_color}}">
  <div class="icon-w-bul-container page-width">
    {% if img_placement == "left" %}
    <div class="icon-main-grid">
      {% for block in section.blocks %}
        <div class="icon-w-bul-icon">
          <div class="block-icon">
            <img src="{{block.settings.image | img_url:'1920x'}}" alt="">
          </div>
          <div class="icon-text text-center">
            <p>{{ block.settings.icon-title }}</p>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="icon-w-bul-content-container">
      <div class="icon-w-bul-text">
        <h2>{{ section.settings.heading }}</h2>

        <p class="">
          {{ section.settings.text_description }}
        </p>
        <ul class="icon-w-bul-list">
          {% assign paragraphs = section.settings.text_list | newline_to_br | split: '<br />' %}
          {% for text in paragraphs %}
            <li class="flex">
              <div class="checkmark">
                <span class="brand-blue">
                  &#10003;
                </span>
              </div>
              <div class="checkmark-text">{{ text }}</div>
            </li>
          {% endfor %}
        </ul>
      </div>

      {% comment %} WARNING {% endcomment %}
      <div class="safety-warning">
        <div class="warning-icon">
          <i class="fa fa-regular fa-exclamation-triangle"></i>
        </div>
        <div class="warning-description">
          <p>{{ section.settings.text_warning }}</p>
        </div>
      </div>
      {% comment %}
      END OF WARNING
      {% endcomment %}
    </div>
    {% endif %}

    {% if img_placement == "right" %}
    <div class="icon-w-bul-content-container">
      <div class="icon-w-bul-text">
        <h2>{{ section.settings.heading }}</h2>

        <p class="">
          {{ section.settings.text_description }}
        </p>
        <ul class="icon-w-bul-list">
          {% assign paragraphs = section.settings.text_list | newline_to_br | split: '<br />' %}
          {% for text in paragraphs %}
            <li class="flex">
              <div class="checkmark">
                <span class="brand-blue">
                  &#10003;
                </span>
              </div>
              <div class="checkmark-text">{{ text }}</div>
            </li>
          {% endfor %}
        </ul>
      </div>

      {% comment %} WARNING {% endcomment %}
      <div class="safety-warning">
        <div class="warning-icon">
          <i class="fa fa-regular fa-exclamation-triangle"></i>
        </div>
        <div class="warning-description">
          <p>{{ section.settings.text_warning }}</p>
        </div>
      </div>
      {% comment %}
      END OF WARNING
      {% endcomment %}
    </div>

    <div class="icon-main-grid">
      {% for block in section.blocks %}
        <div class="icon-w-bul-icon">
          <div class="block-icon">
            <img src="{{block.settings.image | img_url:'1920x'}}" alt="">
          </div>
          <div class="icon-text text-center">
            <p>{{ block.settings.icon-title }}</p>
          </div>
        </div>
      {% endfor %}
    </div>
    {% endif %}
    
  </div>
</div>

{% schema %}
  {
    "name": "Works With",
    "settings": [
      {
        "type": "select",
        "id": "background_color",
        "label": "Background Color",
        "default": "white",
        "options": [
          {
            "value": "white",
            "label": "White"
          }, {
            "value": "lighter-blue",
            "label": "Blue"
          }
        ]
      },
      {
        "type": "select",
        "id": "icon_placement",
        "label": "Icons Placement",
        "default": "left",
        "options": [
          {
            "value": "right",
            "label": "Right"
          }, {
            "value": "left",
            "label": "Left"
          }
        ]
      },
      {
        "id": "image",
        "type": "image_picker",
        "label": "Image Left"
      },
      {
        "id": "heading",
        "type": "text",
        "label": "Heading",
        "default": "Title"
      }, {
        "id": "text_description",
        "type": "textarea",
        "label": "Description"
      }, {
        "id": "text_list",
        "type": "textarea",
        "label": "List"
      }, {
        "id": "text_warning",
        "type": "textarea",
        "label": "Warning Box Text"
      }, {
        "id": "image1",
        "type": "image_picker",
        "label": "warning Icon"
      }
    ],
    "blocks": [
      {
        "type": "icon-block",
        "name": "icon-block",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          },
          {
            "type": "text",
            "id": "icon-title",
            "label": "Icon-title",
            "default": "Text"
          },
          {
            "type": "text",
            "id": "image_width",
            "label": "ImageWidth"
          },
          {
            "type": "text",
            "id": "image_height",
            "label": "Image height"
          }, {
            "type": "text",
            "id": "image_rotate",
            "label": "Image Rotate"
          }, {
            "type": "checkbox",
            "id": "showbackground",
            "label": "Show image as background",
            "default": false
          }
        ]
      }
    ]
  }
{% endschema %}

{% style %}
  .icon-w-bul {
    padding: 50px 0;
  }
  .icon-w-bul-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    align-items: center;
    column-gap: 50px;
  }
  .icon-main-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    padding: 30px;
    border: 1px solid var(--brand-refresh-gray);
    border-radius: 20px;
  }
  .icon-w-bul-icon .block-icon {
    width: 60%;
    margin: 0 auto 15px;
  }
  .icon-w-bul-icon .block-icon img {
    width: 100%;
  }
  .icon-w-bul-icon {
    padding: 10px;
  }
  .icon-text {
    line-height: 25px;
  }
  .icon-w-bul-list {
    display: grid;
    grid-template-rows: 1fr;
  }
  .icon-w-bul-list .checkmark {
    width: 5%;
  }
  .icon-w-bul-list span.brand-blue {
    font-size: 18px;
  }
  .icon-w-bul-list li {
    list-style: none;
    padding: 0 0 0 5px;
    font-weight: 200;
    margin-bottom: 2px;
  }
  .icon-w-bul .safety-warning {
    display: flex;
    align-items: center;
    background-color: #ff9;
    gap: 20px;
    padding: 5px 30px;
    border-radius: 20px;
  }
  .icon-w-bul .warning-icon i {
    font-size: 3rem;
  }
  .icon-w-bul .warning-description {
    font-size: 1.2rem;
  }
  @media(max-width: 786px) {
    .icon-main-grid {
      grid-row: 1;
    }
    .icon-w-bul-content-container {
      grid-row: 2;
    }
    .icon-w-bul-container {
      grid-template-columns: none;
      grid-template-rows: repeat(2, 1fr);
    }
  }

  @media(max-width: 650px) {
    .icon-main-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  }
{% endstyle %}